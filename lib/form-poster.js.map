{"version":3,"sources":["../src/form-poster.js"],"names":["FormPoster","formBuilder","_formBuilder","url","data","callback","form","build","window","addEventListener","handleUnload","removeEventListener","document","body","appendChild","submit","removeChild"],"mappings":";;;;;;;;;;IAAqBA,U;AACjB;;;;AAIA,wBAAYC,WAAZ,EAAyB;AAAA;;AACrB,aAAKC,YAAL,GAAoBD,WAApB;AACH;;AAED;;;;;;;;;;iCAMSE,G,EAAKC,I,EAA2B;AAAA,gBAArBC,QAAqB,uEAAV,YAAM,CAAE,CAAE;;AACrC,gBAAMC,OAAO,KAAKJ,YAAL,CAAkBK,KAAlB,CAAwBJ,GAAxB,EAA6BC,IAA7B,CAAb;;AAEAI,mBAAOC,gBAAP,CAAwB,QAAxB,EAAkC,SAASC,YAAT,GAAwB;AACtDF,uBAAOG,mBAAP,CAA2B,QAA3B,EAAqCD,YAArC;AACAL;AACH,aAHD;;AAKA;AACAO,qBAASC,IAAT,CAAcC,WAAd,CAA0BR,IAA1B;AACAA,iBAAKS,MAAL;AACAH,qBAASC,IAAT,CAAcG,WAAd,CAA0BV,IAA1B;AACH;;;;;;kBA3BgBN,U","file":"form-poster.js","sourcesContent":["export default class FormPoster {\n    /**\n     * @param {FormBuilder} formBuilder\n     * @returns {void}\n     */\n    constructor(formBuilder) {\n        this._formBuilder = formBuilder;\n    }\n\n    /**\n     * @param {string} url\n     * @param {Object} data\n     * @param {function(): void} [callback]\n     * @returns {void}\n     */\n    postForm(url, data, callback = () => {}) {\n        const form = this._formBuilder.build(url, data);\n\n        window.addEventListener('unload', function handleUnload() {\n            window.removeEventListener('unload', handleUnload);\n            callback();\n        });\n\n        // In order to submit the form, the form must be attached to DOM.\n        document.body.appendChild(form);\n        form.submit();\n        document.body.removeChild(form);\n    }\n}\n"]}